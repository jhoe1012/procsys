import{r as w,W as N,j as e}from"./app-9BfIP8Yt.js";import{M as y}from"./Modal-DTHE29Ut.js";import{L as l,I as c}from"./input-B6LatCgn.js";import{A as b}from"./react-select-async.esm-3sqDmmp1.js";import{B as C}from"./button-UluEiDe7.js";import{S as _}from"./react-select.esm-R1G1BB6e.js";import"./transition-6Z6DAD7I.js";import"./index-CzvjeGZW.js";import"./utils-BSdE8tDE.js";import"./useStateManager-7e1e8489.esm-9tTtCMRh.js";function B({p_plants:x,p_material:a}){var m,u;const[p,n]=w.useState(!1),{data:r,setData:s,patch:v,processing:f,reset:d,errors:F}=N({id:a.id,mat_code:a.mat_code,mat_codeChoice:[{label:`${a.mat_code} - ${(m=a.material)==null?void 0:m.mat_desc}`,value:a.mat_code}],plant:a.plant,plantChoice:[{label:`${a.plant} - ${(u=a.plants)==null?void 0:u.name1}`,value:a.plant}],currency:a.currency,valuation_price:a.valuation_price,per_unit:a.per_unit,valid_from:a.valid_from,valid_to:a.valid_to,_method:"patch"}),g=t=>{t.preventDefault(),v(route("val_price.update",a.id),{preserveScroll:!0,onSuccess:()=>i(),onFinish:()=>d()})},i=()=>{n(!1),d()},j=async t=>{if(!t)return[];try{return(await window.axios.get(route("material.search",{search:t}))).data.data.map(o=>({value:o.mat_code,label:`${o.mat_code} - ${o.mat_desc}`}))}catch(h){return console.log("Error fetching data:",h),[]}};return e.jsxs("section",{className:"space-y-6",children:[e.jsx("svg",{onClick:()=>n(!0),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6 cursor-pointer text-blue-500",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),e.jsx(y,{show:p,onClose:i,maxWidth:"lg",children:e.jsx("form",{onSubmit:g,children:e.jsxs("div",{className:"m-2",children:[e.jsxs("div",{className:"flex ",children:[e.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"plant",children:"Plant"}),e.jsx(_,{id:"plant",className:"m-2 w-full border-gray-500",value:r.plantChoice,options:x,onChange:t=>s({...r,plant:t==null?void 0:t.value,plantChoice:t}),placeholder:"Select Plant",required:!0})]}),e.jsxs("div",{className:"flex ",children:[e.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"material",children:"Material"}),e.jsx(b,{className:"m-2 w-full border-gray-500",cacheOptions:!0,defaultOptions:!0,loadOptions:j,value:r.mat_codeChoice,onChange:t=>{s({...r,mat_code:t==null?void 0:t.value,mat_codeChoice:t})},placeholder:"Select Material",required:!0})]}),e.jsxs("div",{className:"flex ",children:[e.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"currency",children:"Currency"}),e.jsx(c,{className:"m-2 w-full border-gray-300 h-10 ",type:"text",id:"currency",defaultValue:r.currency,onChange:t=>s("currency",t.target.value)})]}),e.jsxs("div",{className:"flex ",children:[e.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"price",children:"Price"}),e.jsx(c,{className:"m-2 w-full border-gray-300 h-10 ",type:"number",id:"price",defaultValue:r.valuation_price,onChange:t=>s("valuation_price",parseFloat(t.target.value)),required:!0})]}),e.jsxs("div",{className:"flex ",children:[e.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"price",children:"Per Unit"}),e.jsx(c,{className:"m-2 w-full border-gray-300 h-10 ",type:"number",id:"price",defaultValue:r.per_unit,onChange:t=>s("per_unit",parseFloat(t.target.value)),required:!0})]}),e.jsxs("div",{className:"flex ",children:[e.jsx(l,{className:"p-3 w-1/5 text-sm content-center text-right",htmlFor:"validFrom",children:"Valid From"}),e.jsx(c,{className:"m-2 w-4/12 border-gray-300 h-10 ",type:"date",id:"validFrom",defaultValue:r.valid_from,onChange:t=>s("valid_from",t.target.value),required:!0})]}),e.jsxs("div",{className:"flex ",children:[e.jsx(l,{className:"p-3 w-1/5 text-sm content-center text-right",htmlFor:"validTo",children:"Valid To"}),e.jsx(c,{className:"m-2 w-4/12 border-gray-300 h-10 ",type:"date",id:"validTo",defaultValue:r.valid_to,onChange:t=>s("valid_to",t.target.value),required:!0})]}),e.jsx("div",{className:"grid justify-items-center m-3",children:e.jsx(C,{variant:"outline",disabled:f,className:"bg-[#f8c110]  hover:border-gray-500 hover:bg-[#f8c110] w-60",children:"Update"})})]})})})]})}export{B as default};
